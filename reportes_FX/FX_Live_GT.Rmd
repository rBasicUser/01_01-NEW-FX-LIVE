---
title: "FX Live - An√°lisis T√©cnico y de Riesgo - Guatemala (Plotly Version)"
output:
  html_document:
    toc: true
    toc_depth: 3
    toc_float: 
      collapsed: false
      smooth_scroll: true
    theme: flatly
    highlight: tango
    css: "styles.css"
    code_folding: hide
editor_options: 
  markdown: 
    wrap: 72
---

```{=html}
<style>
.alert{
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid transparent;
  border-radius: 4px;
}
.alert-warning{
  color: #8a6d3b;
  background-color: #fcf8e3;
  border-color: #faebcc;
}
.alert-success{
  color: #3c763d;
  background-color: #dff0d8;
  border-color: #d6e9c6;
}
.alert-danger{
  color: #a94442;
  background-color: #f2dede;
  border-color: #ebccd1;
}
.metric-card{
  background: #f8f9fa;
  border-radius: 8px;
  padding: 15px;
  margin: 10px 0;
  border-left: 4px solid #007bff;
}
.trend-up{ color: #28a745; font-weight: bold; }
.trend-down{ color: #dc3545; font-weight: bold; }
.trend-neutral{ color: #6c757d; font-weight: bold; }
.side-by-side{
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  align-items: flex-start;
}
.side-by-side > div{
  flex: 1;
  min-width: 300px;
}
</style>
```
  
  
```{r setup, include=FALSE}
library(extrafont)
library(scales)
library(tidyverse)
library(lubridate)
library(kableExtra)
library(DT)
library(zoo)      # rollmean / rollapply
library(moments)  # skewness / kurtosis
library(plotly)   # Nueva librer√≠a para gr√°ficas interactivas

knitr::opts_chunk$set(
  echo = FALSE, 
  message = FALSE, 
  warning = FALSE,
  fig.width = 10,
  fig.height = 6,
  dpi = 300,
  comment = NA
)

# Par√°metros
lookback_months <- 12
confidence_level <- 0.95

# Tema visual para plotly
plotly_config <- function(p) {
  p %>%
    config(
      displayModeBar = TRUE,
      modeBarButtonsToRemove = c("pan2d", "select2d", "lasso2d", "autoScale2d"),
      displaylogo = FALSE
    ) %>%
    layout(
      font = list(family = "Arial, sans-serif", size = 12),
      hovermode = "x unified"
    )
}
```

```{r data-load, include=FALSE}
# Cargar datos y preparar M√©tricas
source("../scripts/pilot GT.R")

# Observaciones actuales
current_data <- df_data %>% dplyr::slice_tail(n = 1)
previous_data <- df_data %>% dplyr::slice_tail(n = 2) %>% dplyr::slice_head(n = 1)
```

# üìä Resumen Ejecutivo

::: metric-card
**Fecha del An√°lisis:** `r format(current_data$Fecha, '%d de %B, %Y')`

**Precio Actual:**
`r number(current_data$D_Close, accuracy = 0.01, big.mark = ",")`
(`r if_else(current_data$D_Close > previous_data$D_Close, "‚ÜóÔ∏è", "‚ÜòÔ∏è")`
`r percent((current_data$D_Close / previous_data$D_Close) - 1, accuracy = 0.01)`
vs d√≠a anterior)

**Tendencia General:** `r current_data$trend_long` (Largo Plazo)

**Bandas de Normalidad indican:** `r current_data$bb_signal`

**Percentil Historico:** `r round(current_data$Percentile, 1)`/100
:::

```{r alerts, results="asis"}
# Alertas (sin cambios)
alerts <- list()

if (current_data$Outside20) {
  alert_type <- if_else(current_data$D_Close > current_data$Higher20, "warning", "danger")
  alert_msg <- if_else(
    current_data$D_Close > current_data$Higher20, 
    "‚ö†Ô∏è Precio fuera de banda superior (20 per√≠odos) - Posible sobredepreciaci√≥n",
    "üö® Precio fuera de banda inferior (20 per√≠odos) - Posible sobreapreciaci√≥n"
  )
  alerts <- append(alerts, list(list(type = alert_type, message = alert_msg)))
}

if (!is.na(current_data$rsi)) {
  if (current_data$rsi > 70) {
    alerts <- append(alerts, list(list(type = "warning", message = "‚ö†Ô∏è RSI indica condici√≥n de sobredepreciaci√≥n")))
  } else if (current_data$rsi < 30) {
    alerts <- append(alerts, list(list(type = "danger", message = "üö® RSI indica condici√≥n de sobreapreciaci√≥n")))
  }
}

if (abs(current_data$`%D`) > quantile(abs(df_data$`%D`), 0.95, na.rm = TRUE)) {
  alerts <- append(alerts, list(list(type = "warning", message = "‚ö†Ô∏è Movimiento diario inusual detectado")))
}

if (length(alerts) > 0) {
  for (alert in alerts) {
    cat(paste0('<div class="alert alert-', alert$type, '">', alert$message, '</div>'))
  }
} else {
  cat('<div class="alert alert-success">‚úÖ No se detectaron se√±ales de alerta inmediatas</div>')
}
```

# üìà Posici√≥n Actual

```{r current-position}
# Construcci√≥n expl√≠cita (sin cambios)
library(tibble)

current_formatted <- tibble(
  M√©trica = c(
    "Precio",
    "Cambio respecto al d√≠a anterior (%)",
    "Cambio Semanal (%)",
    "Cambio Anual (%)",
    "Volatilidad (20d)",
    "Tendencia Corto",
    "Tendencia Medio",
    "Tendencia Largo"
  ),
  Valor = c(
    scales::number(current_data$D_Close, accuracy = 0.01, big.mark = ","),
    scales::percent(current_data$`%D`, accuracy = 0.01),
    scales::percent(current_data$`%W`, accuracy = 0.01),
    scales::percent(current_data$YoY, accuracy = 0.01),
    paste0("Q ", round((current_data$volatility_20 / 100 * current_data$D_Close), 3)),
    as.character(current_data$trend_short),
    as.character(current_data$trend_medium),
    as.character(current_data$trend_long)
  )
)

current_formatted %>%
  kable("html", align = c("l", "r")) %>%
  kable_styling(full_width = FALSE, bootstrap_options = c("striped", "hover", "condensed"), position = "center") %>%
  row_spec(0, bold = TRUE, background = "#f8f9fa") %>%
  column_spec(1, bold = TRUE, width = "200px") %>%
  column_spec(2, width = "150px")
```

# üìä An√°lisis T√©cnico

## Evoluci√≥n del Precio

```{r bollinger-enhanced-plotly, fig.height=8}
library(plotly)
recent_data <- df_data %>% dplyr::filter(Fecha >= (Sys.Date() - months(18)))

# Ventanas de tiempo
end_date <- max(df_data$Fecha, na.rm = TRUE)
data_60m <- df_data %>% filter(Fecha >= (end_date %m-% months(60)))
data_24m <- df_data %>% filter(Fecha >= (end_date %m-% months(18)))

# --- Gr√°fico superior: Precio + SMA200 (60 meses) ---
p_top <- plot_ly(data_60m, x = ~Fecha) %>%
  add_lines(y = ~D_Close, name = "Precio", line = list(color = "black", width = 2),
            hovertemplate = "Fecha: %{x}<br>Precio: Q%{y:.2f}<extra></extra>") %>%
  add_lines(y = ~SMA200, name = "SMA 200", line = list(color = "#1e567c", width = 2),
            hovertemplate = "Fecha: %{x}<br>SMA 200: Q%{y:.2f}<extra></extra>") %>%
  layout(
    title = list(text = "Largo Plazo (5 a√±os)", font = list(size = 18)),
    xaxis = list(title = ""),
    yaxis = list(title = "Nivel del Tipo de Cambio"),
    annotations = list(
      text = "SMA200: tendencia de largo plazo",
      x = 0, y = -0.15, xref = "paper", yref = "paper",
      showarrow = FALSE, font = list(size = 10, color = "gray")
    )
  ) %>%
  plotly_config()

# --- Gr√°fico inferior: SMA50, SMA20 y Bandas de Bollinger (24 meses) ---
p_bottom <- plot_ly(data_24m, x = ~Fecha) %>%
  # Bandas de Bollinger
  add_ribbons(ymin = ~Lower50, ymax = ~Higher50, 
              name = "Banda Mediano Plazo", 
              fillcolor = "rgba(18, 100, 155, 0.1)",
              line = list(color = "transparent"),
              hoverinfo = "skip") %>%
  add_ribbons(ymin = ~Lower20, ymax = ~Higher20, 
              name = "Banda Corto Plazo", 
              fillcolor = "rgba(118, 188, 235, 0.15)",
              line = list(color = "transparent"),
              hoverinfo = "skip") %>%
  # L√≠neas de precio y medias m√≥viles
  add_lines(y = ~D_Close, name = "Precio", line = list(color = "black", width = 2),
            hovertemplate = "Fecha: %{x}<br>Precio: Q%{y:.2f}<extra></extra>") %>%
  add_lines(y = ~SMA50, name = "SMA 50", line = list(color = "#12649b", width = 2),
            hovertemplate = "Fecha: %{x}<br>SMA 50: Q%{y:.2f}<extra></extra>") %>%
  add_lines(y = ~SMA20, name = "SMA 20", line = list(color = "#76bceb", width = 2),
            hovertemplate = "Fecha: %{x}<br>SMA 20: Q%{y:.2f}<extra></extra>") %>%
  # Punto actual
  add_markers(data = current_data, x = ~Fecha, y = ~D_Close, 
              name = "Precio Actual", marker = list(color = "red", size = 10),
              hovertemplate = "Precio Actual: Q%{y:.2f}<extra></extra>") %>%
  layout(
    title = list(text = "Corto y Mediano Plazo (a√±o y medio)", font = list(size = 18)),
    xaxis = list(title = "Fecha"),
    yaxis = list(title = "Nivel del Tipo de Cambio"),
    annotations = list(
      text = "Bandas: Corto Plazo (clara), Mediano Plazo (oscura)",
      x = 0, y = -0.15, xref = "paper", yref = "paper",
      showarrow = FALSE, font = list(size = 10, color = "gray")
    )
  ) %>%
  plotly_config()

# Mostrar gr√°ficos
p_top
p_bottom
```

## An√°lisis de Volatilidad

```{r volatility-analysis-plotly}
# Paso 1: transformar la serie en dinero (precio del d√≠a)
recent_data <- recent_data %>%
  mutate(vol20_money = volatility_20 * D_Close / 100)

# Paso 2: calcular la mediana de ese periodo en dinero
mediana_money <- median(recent_data$vol20_money, na.rm = TRUE)

# Paso 3: gr√°fico con plotly
p3 <- plot_ly(recent_data, x = ~Fecha) %>%
  add_ribbons(ymin = 0, ymax = ~vol20_money, 
              name = "Volatilidad", 
              fillcolor = "rgba(0, 123, 255, 0.3)",
              line = list(color = "rgba(0, 123, 255, 0.8)", width = 2),
              hovertemplate = "Fecha: %{x}<br>Volatilidad: Q%{y:.3f}<extra></extra>") %>%
  add_lines(y = mediana_money, 
            name = "Mediana del Per√≠odo", 
            line = list(color = "gray", width = 2, dash = "dash"),
            hovertemplate = "Mediana: Q%{y:.3f}<extra></extra>") %>%
  layout(
    title = list(text = "Volatilidad Hist√≥rica (20 d√≠as)", font = list(size = 18)),
    subtitle = list(text = "Anualizada, expresada en moneda"),
    xaxis = list(title = "Fecha"),
    yaxis = list(title = "Volatilidad (Q)"),
    annotations = list(
      text = "L√≠nea discontinua: mediana del periodo",
      x = 0, y = -0.15, xref = "paper", yref = "paper",
      showarrow = FALSE, font = list(size = 10, color = "gray")
    )
  ) %>%
  plotly_config()

p3
```

## Retorno y Riesgo  

::: {.side-by-side}
::: {}
```{r risk-metrics}
# M√©tricas de riesgo (sin cambios)
calculate_var <- function(returns, confidence = 0.95) {
  as.numeric(quantile(returns, confidence, na.rm = TRUE))
}

calculate_max_drawdown <- function(prices) {
  log_p <- log(prices)
  cummax_log <- cummax(log_p)
  drawdown <- exp(log_p - cummax_log) - 1
  max(drawdown, na.rm = TRUE)
}

daily_returns <- df_data$`%D`
weekly_returns <- df_data$`%W`
annual_returns <- df_data$YoY

# Calcular VaR en dinero
var_daily_pct <- calculate_var(daily_returns, 0.95)
var_weekly_pct <- calculate_var(weekly_returns, 0.95)
var_annual_pct <- calculate_var(annual_returns, 0.95)
var_daily_money <- var_daily_pct * current_data$D_Close
var_weekly_money <- var_weekly_pct * current_data$D_Close
var_annual_money <- var_annual_pct * current_data$D_Close

risk_metrics <- tibble(
  M√©trica = c(
    "VaR Diario (95%) - En dinero",
    "VaR Diario (95%) - En %",
    "VaR Semanal (95%) - En dinero",
    "VaR Semanal (95%) - En %",
    "VaR Anual (95%) - En dinero",
    "VaR Anual (95%) - En %",
    "M√°xima P√©rdida Hist√≥rica (Max Drawdown)",
    "Volatilidad Actual (20d)",
    "Volatilidad Hist√≥rica (Anual)",
    "Sharpe Ratio (aprox.)"
  ),
  Valor = c(
    abs(var_daily_money),
    abs(var_daily_pct) * 100,
    abs(var_weekly_money),
    abs(var_weekly_pct) * 100,
    abs(var_annual_money),
    abs(var_annual_pct) * 100,
    calculate_max_drawdown(df_data$D_Close) * 100,
    current_data$volatility_20,
    sd(daily_returns, na.rm = TRUE) * sqrt(252) * 100,
    (mean(daily_returns, na.rm = TRUE) / sd(daily_returns, na.rm = TRUE)) * sqrt(252)
  ),
  Unidad = c("Q", "%", "Q", "%", "Q", "%", "%", "%", "%", "ratio")
) %>%
  mutate(
    Valor_fmt = dplyr::case_when(
      Unidad == "%" ~ paste0(scales::number(Valor, accuracy = 0.01), " %"),
      Unidad == "Q" ~ paste0("Q ", scales::number(Valor, accuracy = 0.01)),
      TRUE ~ scales::number(Valor, accuracy = 0.01)
    )
  )

risk_metrics %>%
  dplyr::select(M√©trica, Valor_fmt) %>%
  kable("html", caption = "M√©tricas de Riesgo y Performance", col.names = c("M√©trica", "Valor")) %>%
  kable_styling(full_width = FALSE, bootstrap_options = c("striped", "hover", "condensed")) %>%
  row_spec(0, bold = TRUE) %>%
  column_spec(1, width = "300px") %>%
  column_spec(2, width = "175px") %>%
  pack_rows("Value at Risk", 1, 6) %>%
  pack_rows("M√©tricas de Volatilidad", 7, 9) %>%
  pack_rows("Ratio de Performance", 10, 10)
```
:::

::: {}
```{r trend-analysis-simple}
# An√°lisis de tendencias (sin cambios)
fecha_actual <- Sys.Date()
a√±o_actual <- as.numeric(format(fecha_actual, "%Y"))
mes_actual <- as.numeric(format(fecha_actual, "%m"))

# Calcular 6 meses atr√°s
if(mes_actual > 6) {
  a√±o_limite <- a√±o_actual
  mes_limite <- mes_actual - 6
} else {
  a√±o_limite <- a√±o_actual - 1
  mes_limite <- mes_actual + 6
}

fecha_limite <- as.Date(paste(a√±o_limite, sprintf("%02d", mes_limite), "01", sep = "-"))

trend_summary <- df_data %>%
  dplyr::filter(Fecha >= fecha_limite) %>%
  dplyr::mutate(
    A√±o = as.numeric(format(Fecha, "%Y")),
    Mes = as.numeric(format(Fecha, "%m")),
    A√±o_Mes = paste(A√±o, sprintf("%02d", Mes), sep = "-")
  ) %>%
  dplyr::group_by(A√±o_Mes) %>%
  dplyr::summarise(
    Retorno_Mensual = (dplyr::last(D_Close) / dplyr::first(D_Close) - 1) * 100,
    Fecha_Mes = dplyr::first(as.Date(paste(A√±o_Mes, "01", sep = "-"))),
    .groups = "drop"
  ) %>%
  dplyr::arrange(desc(Fecha_Mes))

if(nrow(trend_summary) > 0) {
  trend_summary %>%
    dplyr::select(Fecha_Mes, Retorno_Mensual) %>%
    dplyr::mutate(
      Mes = format(Fecha_Mes, "%B %Y"),
      Retorno_Mensual = paste0(round(Retorno_Mensual, 2), "%")
    ) %>%
    dplyr::select(Mes, Retorno_Mensual) %>%
    kable("html", caption = "Rendimientos Mensuales (√öltimos 6 meses)",
          col.names = c("Mes", "Retorno Mensual")) %>%
    kable_styling(full_width = TRUE, bootstrap_options = c("striped", "hover", "condensed")) %>%
    row_spec(0, bold = TRUE)
} else {
  cat("**No se encontraron datos suficientes**\n")
}
```
:::
:::

# üìà An√°lisis de Distribuciones

```{r distributions-plotly, fig.height=10}
# Preparar datos para plotly
dist_data <- df_data %>%
  dplyr::select(Fecha, `%D`, `%W`, YoY) %>%
  tidyr::pivot_longer(cols = c(`%D`, `%W`, YoY), names_to = "Periodo", values_to = "Retorno") %>%
  dplyr::mutate(
    Retorno_pct = Retorno * 100,
    Periodo = dplyr::case_when(
      Periodo == "%D" ~ "Diario",
      Periodo == "%W" ~ "Semanal", 
      TRUE ~ "Anual"
    )
  ) %>%
  filter(!is.na(Retorno_pct))

# Crear subplots para cada per√≠odo
create_distribution_plot <- function(data, period_name) {
  plot_ly(data, x = ~Retorno_pct, type = "histogram", 
          name = paste("Histograma", period_name),
          opacity = 0.7, nbinsx = 50,
          hovertemplate = "Retorno: %{x:.2f}%<br>Frecuencia: %{y}<extra></extra>") %>%
    add_lines(x = c(0, 0), y = c(0, max(hist(data$Retorno_pct, plot = FALSE)$counts)),
              name = "L√≠nea Cero", line = list(color = "red", dash = "dash"),
              hoverinfo = "skip") %>%
    layout(
      title = paste("Distribuci√≥n de Retornos -", period_name),
      xaxis = list(title = "Retorno (%)"),
      yaxis = list(title = "Frecuencia"),
      showlegend = FALSE
    )
}

# Crear gr√°ficos individuales
p_daily <- dist_data %>% filter(Periodo == "Diario") %>% 
  create_distribution_plot("Diario")

p_weekly <- dist_data %>% filter(Periodo == "Semanal") %>% 
  create_distribution_plot("Semanal")

p_annual <- dist_data %>% filter(Periodo == "Anual") %>% 
  create_distribution_plot("Anual")

# Crear subplot combinado
p4 <- subplot(p_daily, p_weekly, p_annual, nrows = 3, shareX = FALSE) %>%
  layout(
    title = list(text = "Distribuci√≥n de Retornos por Per√≠odo", font = list(size = 18)),
    annotations = list(
      text = "Histogramas con l√≠nea de referencia en cero",
      x = 0.5, y = -0.05, xref = "paper", yref = "paper",
      showarrow = FALSE, font = list(size = 10, color = "gray")
    )
  ) %>%
  plotly_config()

p4
```

# üìä Dashboard de Se√±ales

```{r signals-dashboard}
# Dashboard de se√±ales (sin cambios)
signals_data <- tibble(
  Indicador = c(
    "Precio en Corto Plazo",
    "Precio en Mediano Plazo", 
    "Precio en Largo Plazo",
    "Corto vs Mediano Plazo",
    "Mediano vs Largo Plazo",
    "Bandas de Normalidad",
    "RSI (14)",
    "Volatilidad vs Mediana"
  ),
  Se√±al = c(
    if_else(current_data$D_Close > current_data$SMA20, "Depreciaci√≥n", "Apreciaci√≥n"),
    if_else(current_data$D_Close > current_data$SMA50, "Depreciaci√≥n", "Apreciaci√≥n"),
    if_else(current_data$D_Close > current_data$SMA200, "Depreciaci√≥n", "Apreciaci√≥n"),
    if_else(current_data$SMA20 > current_data$SMA50, "Depreciaci√≥n", "Apreciaci√≥n"),
    if_else(current_data$SMA50 > current_data$SMA200, "Depreciaci√≥n", "Apreciaci√≥n"),
    current_data$bb_signal,
    case_when(
      is.na(current_data$rsi) ~ "N/A",
      current_data$rsi > 70 ~ "Sobrecompra",
      current_data$rsi < 30 ~ "Sobreventa",
      TRUE ~ "Neutral"
    ),
    if_else(current_data$volatility_20 > median(df_data$volatility_20, na.rm = TRUE), "Alta", "Normal")
  ),
) %>%
  mutate(
    Color = case_when(
      Se√±al %in% c("Depreciaci√≥n", "Alta") ~ "success",
      Se√±al %in% c("Apreciaci√≥n", "Sobreventa") ~ "danger", 
      Se√±al %in% c("Sobrecompra") ~ "warning",
      TRUE ~ "secondary"
    )
  )

signals_data %>%
  dplyr::select(Indicador, Se√±al) %>%
  kable("html", caption = "Dashboard de Se√±ales T√©cnicas", col.names = c("Indicador", "Se√±al")) %>%
  kable_styling(full_width = TRUE, bootstrap_options = c("striped", "hover", "condensed")) %>%
  row_spec(0, bold = TRUE) %>%
  pack_rows("Se√±ales de Precio", 1, 3) %>%
  pack_rows("Se√±ales de Tendencia", 4, 5) %>%
  pack_rows("Se√±ales de Momentum", 6, 7) %>%
  pack_rows("Se√±ales de Volatilidad", 8, 8)
```

## Gr√°fico Adicional: RSI Interactivo

```{r rsi-plotly}
# Gr√°fico adicional de RSI con plotly
if (!all(is.na(data_24m$rsi))) {
  p_rsi <- plot_ly(data_24m, x = ~Fecha) %>%
    add_lines(y = ~rsi, name = "RSI", line = list(color = "#9b59b6", width = 2),
              hovertemplate = "Fecha: %{x}<br>RSI: %{y:.1f}<extra></extra>") %>%
    add_lines(y = 70, name = "Sobrecompra", line = list(color = "red", dash = "dash"),
              hovertemplate = "Nivel: 70<extra></extra>") %>%
    add_lines(y = 30, name = "Sobreventa", line = list(color = "green", dash = "dash"),
              hovertemplate = "Nivel: 30<extra></extra>") %>%
    add_lines(y = 50, name = "Neutral", line = list(color = "gray", dash = "dot"),
              hovertemplate = "Nivel: 50<extra></extra>") %>%
    layout(
      title = list(text = "√çndice de Fuerza Relativa (RSI)", font = list(size = 18)),
      xaxis = list(title = "Fecha"),
      yaxis = list(title = "RSI", range = c(0, 100)),
      shapes = list(
        list(type = "rect", x0 = min(data_24m$Fecha), x1 = max(data_24m$Fecha),
             y0 = 70, y1 = 100, fillcolor = "rgba(255, 0, 0, 0.1)", 
             line = list(width = 0)),
        list(type = "rect", x0 = min(data_24m$Fecha), x1 = max(data_24m$Fecha),
             y0 = 0, y1 = 30, fillcolor = "rgba(0, 255, 0, 0.1)", 
             line = list(width = 0))
      )
    ) %>%
    plotly_config()
  
  p_rsi
}
```

------------------------------------------------------------------------

::: {style="margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 5px;"}
<h4>üìù Notas Metodol√≥gicas</h4>

<ul>

<li><strong>Bandas de Normalidad:</strong> 
  Un valor fuera de las bandas de normalidad es un movimiento inusual en el respectivo corto, largo o mediano plazo
  </li>

<li><strong>RSI:</strong> √çndice de Fuerza Relativa: compara ca√≠das y subidas en los √∫ltimos 14 d√≠as para identificar si puede venir un cambio significativo</li>

<li><strong>VaR/CVaR:</strong> Value at Risk indica la cantidad que puedo llegar perder ante un evento poco usual</li>

<li><strong>Volatilidad:</strong> 
mide qu√© tanto ha variado el precio en los √∫ltimos 20 d√≠as y lo proyecta a lo que ser√≠a en un a√±o</li>

<li><strong>Tendencias:</strong> Trayectoria m√°s probable del Tipo de Cambio</li>

<li><strong>Interactividad:</strong> Las gr√°ficas ahora son interactivas - puedes hacer zoom, hover para ver valores exactos, y activar/desactivar series haciendo clic en la leyenda</li>

</ul>
:::

::: {style="text-align: center; margin-top: 20px; color: #6c757d; font-size: 0.9em;"}
Reporte generado autom√°ticamente el
`r format(Sys.time(), '%d de %B, %Y a las %H:%M')` | ¬© Equipo de
Inteligencia de Negocios
:::
